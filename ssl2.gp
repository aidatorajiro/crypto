p = 2^255 - 19

G = [9, 1]
H = 121666

add(P, Q) = {
  local(
    a = P[1] + P[2],
    b = P[1] - P[2],
    c = Q[1] + Q[2],
    d = Q[1] - Q[2]
  );
  [G[2]*(b*c + a*d)^2, G[1]*(b*c - a*d)^2]
}

dbl(P) = {
  local(
    a = P[1] + P[2],
    b = P[1] - P[2],
    c = a^2 * b^2,
    d = a^2 - b^2
  );
  [c, d*(a^2 + H*d)]
}

/*
486662

P = (x1, z1)
Q = (x2, z2)

P == Q <=> x1/z1 == x2/z2 <=> x1z2 == x2z1
*/